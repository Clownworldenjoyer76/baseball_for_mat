=== Pipeline Prep Summary (00-05) ===
Date: 2025-10-01T19:39:40Z

[00] Foundation/Normalize/Inject/Rebuild: OK
[01] Split & Stage: OK
[02] Context & Fixes: OK (see logs for conditional steps)
[03] Weather Inputs: OK
[04] Weather Adjustments + Combines: OK

--- Weather Audit ---
Games today (unique game_id): 4
Weather rows (unique game_id): 4

--- Key files present ---
total 2.3M
drwxr-xr-x  2 runner runner 4.0K Oct  1 15:38 .
drwxr-xr-x 17 runner runner 4.0K Oct  1 15:38 ..
-rw-r--r--  1 runner runner  14K Oct  1 15:38 batter_event_probabilities.csv
-rw-r--r--  1 runner runner 9.6K Oct  1 15:38 batter_props_expanded_final.csv
-rw-r--r--  1 runner runner    1 Oct  1 15:38 batter_props_expanded_final_imputed_adj_woba_rows.csv
-rw-r--r--  1 runner runner  11K Oct  1 15:38 batter_props_projected_final.csv
-rw-r--r--  1 runner runner    1 Oct  1 15:38 batter_props_projected_final_imputed_adj_woba_rows.csv
-rw-r--r--  1 runner runner 4.7K Oct  1 15:38 pitcher_event_probabilities.csv
-rw-r--r--  1 runner runner 809K Oct  1 15:38 pitcher_mega_z.csv
-rw-r--r--  1 runner runner 573K Oct  1 15:38 pitcher_mega_z_final.csv
-rw-r--r--  1 runner runner 809K Oct  1 15:38 pitcher_mega_z_fixed.csv
-rw-r--r--  1 runner runner 1.9K Oct  1 15:38 pitcher_props_projected.csv
-rw-r--r--  1 runner runner 2.0K Oct  1 15:38 pitcher_props_projected_final.csv
-rw-r--r--  1 runner runner 1.9K Oct  1 15:38 pitcher_props_projected_fixed.csv
-rw-r--r--  1 runner runner  462 Oct  1 15:38 todaysgames_normalized_fixed.csv
total 716K
drwxr-xr-x 2 runner runner 4.0K Oct  1 15:38 .
drwxr-xr-x 5 runner runner 4.0K Oct  1 15:38 ..
-rw-r--r-- 1 runner runner  13K Oct  1 15:38 batter_away_final.csv
-rw-r--r-- 1 runner runner  14K Oct  1 15:38 batter_event_probabilities.csv
-rw-r--r-- 1 runner runner  13K Oct  1 15:38 batter_home_final.csv
-rw-r--r-- 1 runner runner  12K Oct  1 15:38 batter_props_expanded_final.csv
-rw-r--r-- 1 runner runner  13K Oct  1 15:38 batter_props_projected_final.csv
-rw-r--r-- 1 runner runner  17K Oct  1 15:38 finalbatawp.csv
-rw-r--r-- 1 runner runner  16K Oct  1 15:38 finalbathwp.csv
-rw-r--r-- 1 runner runner  549 Oct  1 15:38 game_score_projections.csv
-rw-r--r-- 1 runner runner 4.7K Oct  1 15:38 pitcher_event_probabilities.csv
-rw-r--r-- 1 runner runner 573K Oct  1 15:38 pitcher_mega_z_final.csv
-rw-r--r-- 1 runner runner 2.0K Oct  1 15:38 pitcher_props_projected_final.csv
-rw-r--r-- 1 runner runner  472 Oct  1 15:38 startingpitchers.csv

--- Recent logs ---
==> logs/00_todaysgames.log <==
DEBUG: Python: 3.10.18 (main, Jun  4 2025, 04:04:42) [GCC 13.3.0]
DEBUG: CWD: /home/runner/work/baseball_for_mat/baseball_for_mat
DEBUG: Output target: /home/runner/work/baseball_for_mat/baseball_for_mat/data/raw/todaysgames.csv (exists_pre=True)
DEBUG: ENV TZ: America/New_York / arg tz=America/New_York
DEBUG: Target date: 2025-10-01
DEBUG: HTTP GET https://statsapi.mlb.com/api/v1/schedule
DEBUG: Params: {
  "sportId": 1,
  "date": "2025-10-01",
  "hydrate": "probablePitcher(note,fullName),team",
  "language": "en"
}
DEBUG: Response status: 200
DEBUG: Final URL: https://statsapi.mlb.com/api/v1/schedule?sportId=1&date=2025-10-01&hydrate=probablePitcher%28note%2CfullName%29%2Cteam&language=en
DEBUG: Response preview (500): '{"copyright":"Copyright 2025 MLB Advanced Media, L.P.  Use of any content on this page acknowledges agreement to the terms posted here http://gdx.mlb.com/components/copyright.txt","totalItems":4,"totalEvents":0,"totalGames":4,"totalGamesInProgress":2,"dates":[{"date":"2025-10-01","totalItems":4,"totalEvents":0,"totalGames":4,"totalGamesInProgress":2,"games":[{"gamePk":813071,"gameGuid":"fca403df-ecba-4340-b893-370ece3b6f7d","link":"/api/v1.1/game/813071/feed/live","gameType":"F","season":"2025",'
DEBUG: Games found: 4
DEBUG: Team map -> name='Cleveland Guardians' abbr_api='CLE' chosen='CLE'
DEBUG: Team map -> name='Detroit Tigers' abbr_api='DET' chosen='DET'
DEBUG: [1] game_id=813071 DET@CLE time='1:08 PM' pitchers: home='Bibee, Tanner', away='Mize, Casey'
DEBUG: Team map -> name='Chicago Cubs' abbr_api='CHC' chosen='CHC'
DEBUG: Team map -> name='San Diego Padres' abbr_api='SD' chosen='SD'
DEBUG: [2] game_id=813064 SD@CHC time='3:08 PM' pitchers: home='Kittredge, Andrew', away='Cease, Dylan'
DEBUG: Team map -> name='New York Yankees' abbr_api='NYY' chosen='NYY'
DEBUG: Team map -> name='Boston Red Sox' abbr_api='BOS' chosen='BOS'
DEBUG: [3] game_id=813070 BOS@NYY time='6:08 PM' pitchers: home='Rodón, Carlos', away='Bello, Brayan'
DEBUG: Team map -> name='Los Angeles Dodgers' abbr_api='LAD' chosen='LAD'
DEBUG: Team map -> name='Cincinnati Reds' abbr_api='CIN' chosen='CIN'
DEBUG: [4] game_id=813068 CIN@LAD time='9:08 PM' pitchers: home='Yamamoto, Yoshinobu', away='Littell, Zack'
DEBUG: Ensured parent dir: data/raw
DEBUG: Writing CSV -> /home/runner/work/baseball_for_mat/baseball_for_mat/data/raw/todaysgames.csv
DEBUG: Row count: 4
DEBUG: Row preview: [
  {
    "game_id": 813071,
    "home_team": "CLE",
    "away_team": "DET",
    "game_time": "1:08 PM",
    "pitcher_home": "Bibee, Tanner",
    "pitcher_away": "Mize, Casey"
  },
  {
    "game_id": 813064,
    "home_team": "CHC",
    "away_team": "SD",
    "game_time": "3:08 PM",
    "pitcher_home": "Kittredge, Andrew",
    "pitcher_away": "Cease, Dylan"
  },
  {
    "game_id": 813070,
    "home_team": "NYY",
    "away_team": "BOS",
    "game_time": "6:08 PM",
    "pitcher_home": "Rod\u00f3n, Carlos",
    "pitcher_away": "Bello, Brayan"
  }
]
DEBUG: Wrote CSV bytes: 340
DEBUG: CSV head:
"game_id","home_team","away_team","game_time","pitcher_home","pitcher_away"
"813071","CLE","DET","1:08 PM","Bibee, Tanner","Mize, Casey"
"813064","CHC","SD","3:08 PM","Kittredge, Andrew","Cease, Dylan"
"813070","NYY","BOS","6:08 PM","Rodón, Carlos","Bello, Brayan"
"813068","LAD","CIN","9:08 PM","Yamamoto, Yoshinobu","Littell, Zack"

DEBUG: File exists (post): True size=340

==> logs/01_normalize_todays_games.log <==
✅ normalize_todays_games wrote 4 rows -> data/raw/todaysgames_normalized.csv

==> logs/02_inject_pitcher_ids.log <==

==> logs/03_rebuild_startingpitchers.log <==
✅ Wrote 8 rows -> data/raw/startingpitchers_with_opp_context.csv

==> logs/04_splithome.log <==

==> logs/05_splitaway.log <==

==> logs/06_bet_prep_1.log <==
✅ Wrote 4 rows -> data/bets/mlb_sched.csv

==> logs/09a_get_weather_data.log <==
2025-10-01 03:39:34 PM 🔄 Read data/weather_input.csv...
2025-10-01 03:39:34 PM 🌍 Fetch weather for 4 venues...
2025-10-01 03:39:36 PM ✅ Wrote data/weather_adjustments.csv with 4 rows.

==> logs/09b_generate_weather_csv.log <==

==> logs/09c_weather_data_fix.log <==
🔄 Load weather_adjustments.csv...
🧮 Calculate weather_factor...
✅ Done.

==> logs/09d_finalize_weather_outputs.log <==
Games today: 4  |  Weather rows (unique game_id): 4
WROTE data/weather_adjustments.csv with 4 rows (unique per game_id)

==> logs/09e_normalize_pitcher_weather_outputs.log <==
weather_adjustments.csv already unique by game_id.
normalize_pitcher_weather_outputs: OK

==> logs/10_apply_weather_adjustment_batters.log <==

==> logs/11_apply_weather_adjustment_pitchers.log <==
[main 3c9cf4e95] Apply pitcher weather factor with woba injection + defaults
 1 file changed, 0 insertions(+), 0 deletions(-)
 create mode 100644 summaries/pitchers_adjust/missing_woba.txt
To https://github.com/Clownworldenjoyer76/baseball_for_mat
   441e99411..3c9cf4e95  main -> main

==> logs/12_combine_batter_weather_park.log <==
⚠️ [home] merge produced 0 rows (check player_id/game_id alignment)
💾 [HOME] wrote: data/adjusted/batters_home_weather_park.csv (0 rows)
⚠️ [away] merge produced 0 rows (check player_id/game_id alignment)
💾 [AWAY] wrote: data/adjusted/batters_away_weather_park.csv (0 rows)
On branch main
Your branch is up to date with 'origin/main'.

Changes not staged for commit:
  (use "git add <file>..." to update what will be committed)
  (use "git restore <file>..." to discard changes in working directory)
	modified:   data/adjusted/batters_away_weather.csv
	modified:   data/adjusted/batters_home_weather.csv
	modified:   data/weather_adjustments.csv
	modified:   data/weather_input.csv
	modified:   logs/00_todaysgames.log
	modified:   logs/09a_get_weather_data.log
	modified:   logs/09d_finalize_weather_outputs.log
	modified:   logs/11_apply_weather_adjustment_pitchers.log
	modified:   logs/12_combine_batter_weather_park.log

no changes added to commit (use "git add" and/or "git commit -a")
⚠️ git commit/push failed: Command '['git', 'commit', '-m', 'combine_batter_weather_park: id-based merge']' returned non-zero exit status 1.

==> logs/13_combine_pitcher_weather_park_home.log <==
On branch main
Your branch is up to date with 'origin/main'.

Changes not staged for commit:
  (use "git add <file>..." to update what will be committed)
  (use "git restore <file>..." to discard changes in working directory)
	modified:   data/adjusted/batters_away_weather.csv
	modified:   data/adjusted/batters_home_weather.csv
	modified:   data/weather_adjustments.csv
	modified:   data/weather_input.csv
	modified:   logs/00_todaysgames.log
	modified:   logs/09a_get_weather_data.log
	modified:   logs/09d_finalize_weather_outputs.log
	modified:   logs/11_apply_weather_adjustment_pitchers.log
	modified:   logs/12_combine_batter_weather_park.log
	modified:   logs/13_combine_pitcher_weather_park_home.log

no changes added to commit (use "git add" and/or "git commit -a")

==> logs/14_combine_pitcher_weather_park_away.log <==
On branch main
Your branch is up to date with 'origin/main'.

Changes not staged for commit:
  (use "git add <file>..." to update what will be committed)
  (use "git restore <file>..." to discard changes in working directory)
	modified:   data/adjusted/batters_away_weather.csv
	modified:   data/adjusted/batters_home_weather.csv
	modified:   data/weather_adjustments.csv
	modified:   data/weather_input.csv
	modified:   logs/00_todaysgames.log
	modified:   logs/09a_get_weather_data.log
	modified:   logs/09d_finalize_weather_outputs.log
	modified:   logs/11_apply_weather_adjustment_pitchers.log
	modified:   logs/12_combine_batter_weather_park.log
	modified:   logs/13_combine_pitcher_weather_park_home.log
	modified:   logs/14_combine_pitcher_weather_park_away.log

no changes added to commit (use "git add" and/or "git commit -a")
