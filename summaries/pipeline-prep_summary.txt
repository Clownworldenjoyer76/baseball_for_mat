=== Pipeline Prep Summary (00-05) ===
Date: 2025-10-02T20:51:00Z

[00] Foundation/Normalize/Inject/Rebuild: OK
[01] Split & Stage: OK
[02] Context + Normalize/Tag + PF: OK
[03] Weather Inputs: OK
[04] Weather Adjustments + Combines: OK
[05] Pitcher Event Probabilities: OK

--- Weather Audit ---
Games today (unique game_id): 3
Weather rows (unique game_id): 3

--- Key files present ---
total 2.2M
drwxr-xr-x  2 runner runner 4.0K Oct  2 16:49 .
drwxr-xr-x 18 runner runner 4.0K Oct  2 16:49 ..
-rw-r--r--  1 runner runner  14K Oct  2 16:49 batter_event_probabilities.csv
-rw-r--r--  1 runner runner  12K Oct  2 16:49 batter_props_expanded_final.csv
-rw-r--r--  1 runner runner 9.9K Oct  2 16:49 batter_props_expanded_final.csv.bak
-rw-r--r--  1 runner runner 7.8K Oct  2 16:49 batter_props_expanded_final_imputed_adj_woba_rows.csv
-rw-r--r--  1 runner runner  13K Oct  2 16:49 batter_props_projected_final.csv
-rw-r--r--  1 runner runner  12K Oct  2 16:49 batter_props_projected_final.csv.bak
-rw-r--r--  1 runner runner 7.8K Oct  2 16:49 batter_props_projected_final_imputed_adj_woba_rows.csv
-rw-r--r--  1 runner runner 4.7K Oct  2 16:50 pitcher_event_probabilities.csv
-rw-r--r--  1 runner runner 754K Oct  2 16:49 pitcher_mega_z.csv
-rw-r--r--  1 runner runner 573K Oct  2 16:49 pitcher_mega_z_final.csv
-rw-r--r--  1 runner runner 754K Oct  2 16:49 pitcher_mega_z_fixed.csv
-rw-r--r--  1 runner runner 1.9K Oct  2 16:49 pitcher_props_projected.csv
-rw-r--r--  1 runner runner 2.0K Oct  2 16:49 pitcher_props_projected_final.csv
-rw-r--r--  1 runner runner 1.9K Oct  2 16:49 pitcher_props_projected_fixed.csv
-rw-r--r--  1 runner runner  462 Oct  2 16:49 todaysgames_normalized_fixed.csv
total 712K
drwxr-xr-x 2 runner runner 4.0K Oct  2 16:49 .
drwxr-xr-x 5 runner runner 4.0K Oct  2 16:49 ..
-rw-r--r-- 1 runner runner  13K Oct  2 16:49 batter_away_final.csv
-rw-r--r-- 1 runner runner  14K Oct  2 16:49 batter_event_probabilities.csv
-rw-r--r-- 1 runner runner  13K Oct  2 16:49 batter_home_final.csv
-rw-r--r-- 1 runner runner  12K Oct  2 16:49 batter_props_expanded_final.csv
-rw-r--r-- 1 runner runner  13K Oct  2 16:49 batter_props_projected_final.csv
-rw-r--r-- 1 runner runner 6.6K Oct  2 16:49 finalbatawp.csv
-rw-r--r-- 1 runner runner 6.7K Oct  2 16:49 finalbathwp.csv
-rw-r--r-- 1 runner runner  558 Oct  2 16:49 game_score_projections.csv
-rw-r--r-- 1 runner runner 4.7K Oct  2 16:50 pitcher_event_probabilities.csv
-rw-r--r-- 1 runner runner 573K Oct  2 16:49 pitcher_mega_z_final.csv
-rw-r--r-- 1 runner runner 2.0K Oct  2 16:49 pitcher_props_projected_final.csv
-rw-r--r-- 1 runner runner  19K Oct  2 16:50 startingpitchers.csv

--- Recent logs ---
	modified:   logs/09a_get_weather_data.log
	modified:   logs/09d_finalize_weather_outputs.log
	modified:   logs/11_apply_weather_adjustment_pitchers.log
	modified:   logs/12_combine_batter_weather_park.log
	modified:   logs/13_combine_pitcher_weather_park_home.log
	modified:   logs/14_combine_pitcher_weather_park_away.log

no changes added to commit (use "git add" and/or "git commit -a")

==> logs/14_validate_tagged_players.log <==
INFO: 🔍 Validating: data/tagged/batters_normalized.csv
INFO: ✅ All batters rows passed schema validation.
INFO: 🔍 Validating: data/tagged/pitchers_normalized.csv
INFO: ✅ All pitchers rows passed schema validation.

==> logs/15_update_game_time.log <==
✅ Updated data/raw/todaysgames_normalized.csv (park_factor filled 3/3)

==> logs/16_finalize_todaysgames_types_and_pf.log <==
✅ Wrote data/raw/todaysgames_normalized.csv | rows=3 | dtype(park_factor)=float64

==> logs/17_apply_park_adjustment.log <==

==> logs/18_apply_pitcher_park_adjustment.log <==
On branch main
Your branch is up to date with 'origin/main'.

Changes not staged for commit:
  (use "git add <file>..." to update what will be committed)
  (use "git restore <file>..." to discard changes in working directory)
	modified:   data/output/player_totals.txt
	modified:   data/raw/startingpitchers_with_opp_context.csv
	modified:   logs/13_deduplicate_normalized.log
	modified:   logs/18_apply_pitcher_park_adjustment.log
	modified:   summaries/summary.txt

no changes added to commit (use "git add" and/or "git commit -a")
Git error: Command '['git', 'commit', '-m', 'Apply pitcher park factor with woba injection + defaults']' returned non-zero exit status 1.

==> logs/19_clean_and_preprocess_games.log <==
✅ Saved cleaned games file → data/end_chain/cleaned/games_today_cleaned.csv (rows=3)

==> logs/20_pit1.log <==
✅ Merged pitcher data saved to: data/end_chain/final/startingpitchers.csv
ℹ️ Rows: 24 | Matched to xtra by player_id (has any xtra data): 24

==> logs/21_chain_load_data.log <==
--- Starting Data Loading Process ---
Loading games from data/end_chain/first/games_today.csv...
✅ Loaded games. Shape: (3, 12)
Loading batters_home from data/end_chain/first/raw/bat_hwp_dirty.csv...
✅ Loaded batters_home. Shape: (84, 5)
Loading batters_away from data/end_chain/first/raw/bat_awp_dirty.csv...
✅ Loaded batters_away. Shape: (84, 5)
Loading pitchers_home from data/end_chain/first/pit_hwp.csv...
✅ Loaded pitchers_home. Shape: (12, 5)
Loading pitchers_away from data/end_chain/first/pit_awp.csv...
✅ Loaded pitchers_away. Shape: (12, 5)
--- Data Loading Complete ---

==> logs/22_prep_merge.log <==
Saved pitchers home → data/end_chain/first/pit_hwp.csv
Saved pitchers away → data/end_chain/first/pit_awp.csv
Saved cleaned batters away → data/end_chain/first/raw/bat_awp_dirty.csv
Saved batters home → data/end_chain/first/raw/bat_hwp_dirty.csv
Copied games file → data/end_chain/first/games_today.csv
On branch main
Your branch is up to date with 'origin/main'.

Changes not staged for commit:
  (use "git add <file>..." to update what will be committed)
  (use "git restore <file>..." to discard changes in working directory)
	modified:   data/end_chain/final/startingpitchers.csv
	modified:   data/output/player_totals.txt
	modified:   data/raw/startingpitchers_with_opp_context.csv
	modified:   logs/13_deduplicate_normalized.log
	modified:   logs/22_prep_merge.log
	modified:   summaries/summary.txt

no changes added to commit (use "git add" and/or "git commit -a")
Git operation failed: Command '['git', 'commit', '-m', 'prep_merge: stage files (player_id/game_id-based)']' returned non-zero exit status 1.

==> logs/23a_get_weather_data.log <==
2025-10-02 04:50:55 PM 🔄 Read data/weather_input.csv...
2025-10-02 04:50:55 PM 🌍 Fetch weather for 3 venues...
2025-10-02 04:50:56 PM ✅ Wrote data/weather_adjustments.csv with 3 rows.

==> logs/23b_generate_weather_csv.log <==

==> logs/23c_weather_data_fix.log <==
🔄 Load weather_adjustments.csv...
🧮 Calculate weather_factor...
✅ Done.

==> logs/23d_finalize_weather_outputs.log <==
Games today: 3  |  Weather rows (unique game_id): 3
WROTE data/weather_adjustments.csv with 3 rows (unique per game_id)

==> logs/23e_normalize_pitcher_weather_outputs.log <==
weather_adjustments.csv already unique by game_id.
normalize_pitcher_weather_outputs: OK

==> logs/24_apply_weather_adjustment_batters.log <==

==> logs/25_apply_weather_adjustment_pitchers.log <==
On branch main
Your branch is up to date with 'origin/main'.

Changes not staged for commit:
  (use "git add <file>..." to update what will be committed)
  (use "git restore <file>..." to discard changes in working directory)
	modified:   data/adjusted/batters_away_weather.csv
	modified:   data/adjusted/batters_home_weather.csv
	modified:   data/end_chain/final/startingpitchers.csv
	modified:   data/output/player_totals.txt
	modified:   data/raw/startingpitchers_with_opp_context.csv
	modified:   data/weather_adjustments.csv
	modified:   logs/13_deduplicate_normalized.log
	modified:   logs/22_prep_merge.log
	modified:   logs/23a_get_weather_data.log
	modified:   logs/25_apply_weather_adjustment_pitchers.log
	modified:   summaries/summary.txt

no changes added to commit (use "git add" and/or "git commit -a")
Git error: Command '['git', 'commit', '-m', 'Apply pitcher weather factor with woba injection + defaults']' returned non-zero exit status 1.

==> logs/26_combine_batter_weather_park.log <==
💾 [HOME] wrote: data/adjusted/batters_home_weather_park.csv (84 rows)
💾 [AWAY] wrote: data/adjusted/batters_away_weather_park.csv (84 rows)
On branch main
Your branch is up to date with 'origin/main'.

Changes not staged for commit:
  (use "git add <file>..." to update what will be committed)
  (use "git restore <file>..." to discard changes in working directory)
	modified:   data/adjusted/batters_away_weather.csv
	modified:   data/adjusted/batters_home_weather.csv
	modified:   data/end_chain/final/startingpitchers.csv
	modified:   data/output/player_totals.txt
	modified:   data/raw/startingpitchers_with_opp_context.csv
	modified:   data/weather_adjustments.csv
	modified:   logs/13_deduplicate_normalized.log
	modified:   logs/22_prep_merge.log
	modified:   logs/23a_get_weather_data.log
	modified:   logs/25_apply_weather_adjustment_pitchers.log
	modified:   logs/26_combine_batter_weather_park.log
	modified:   summaries/summary.txt

no changes added to commit (use "git add" and/or "git commit -a")
⚠️ git commit/push failed: Command '['git', 'commit', '-m', 'combine_batter_weather_park: id-based merge']' returned non-zero exit status 1.

==> logs/27_combine_pitcher_weather_park_home.log <==
On branch main
Your branch is up to date with 'origin/main'.

Changes not staged for commit:
  (use "git add <file>..." to update what will be committed)
  (use "git restore <file>..." to discard changes in working directory)
	modified:   data/adjusted/batters_away_weather.csv
	modified:   data/adjusted/batters_home_weather.csv
	modified:   data/end_chain/final/startingpitchers.csv
	modified:   data/output/player_totals.txt
	modified:   data/raw/startingpitchers_with_opp_context.csv
	modified:   data/weather_adjustments.csv
	modified:   logs/13_deduplicate_normalized.log
	modified:   logs/22_prep_merge.log
	modified:   logs/23a_get_weather_data.log
	modified:   logs/25_apply_weather_adjustment_pitchers.log
	modified:   logs/26_combine_batter_weather_park.log
	modified:   logs/27_combine_pitcher_weather_park_home.log
	modified:   summaries/summary.txt

no changes added to commit (use "git add" and/or "git commit -a")

==> logs/28_combine_pitcher_weather_park_away.log <==
On branch main
Your branch is up to date with 'origin/main'.

Changes not staged for commit:
  (use "git add <file>..." to update what will be committed)
  (use "git restore <file>..." to discard changes in working directory)
	modified:   data/adjusted/batters_away_weather.csv
	modified:   data/adjusted/batters_home_weather.csv
	modified:   data/end_chain/final/startingpitchers.csv
	modified:   data/output/player_totals.txt
	modified:   data/raw/startingpitchers_with_opp_context.csv
	modified:   data/weather_adjustments.csv
	modified:   logs/13_deduplicate_normalized.log
	modified:   logs/22_prep_merge.log
	modified:   logs/23a_get_weather_data.log
	modified:   logs/25_apply_weather_adjustment_pitchers.log
	modified:   logs/26_combine_batter_weather_park.log
	modified:   logs/27_combine_pitcher_weather_park_home.log
	modified:   logs/28_combine_pitcher_weather_park_away.log
	modified:   summaries/summary.txt

no changes added to commit (use "git add" and/or "git commit -a")

==> logs/29_project_pitcher_event_probabilities.log <==
OK: wrote data/_projections/pitcher_event_probabilities.csv and data/end_chain/final/pitcher_event_probabilities.csv rows=28
